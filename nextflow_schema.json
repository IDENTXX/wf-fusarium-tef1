{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Fusarium TEF1 metabarcoding",
  "description": "EPI2ME Desktop compatible workflow: trimming -> filtering -> clustering -> BLAST -> tables + HTML report.",
  "type": "object",
  "properties": {
    "reads": {
      "title": "Reads root directory",
      "type": "string",
      "format": "path",
      "description": "Directory containing per-sample subfolders with FASTQ.gz files (READS_ROOT/Sample01/*.fastq.gz)."
    },
    "db_fasta": {
      "title": "TEF1 reference FASTA",
      "type": "string",
      "format": "file-path",
      "description": "FASTA used to build the BLAST database (e.g. Fusarium TEF1 reference set)."
    },
    "out_dir": {
      "title": "Output directory",
      "type": "string",
      "format": "path",
      "default": "output"
    },

    "primer_fwd": {
      "title": "Forward primer",
      "type": "string",
      "default": ""
    },
    "primer_rev": {
      "title": "Reverse primer",
      "type": "string",
      "default": ""
    },
    "require_primers": {
      "title": "Discard reads without primer match",
      "type": "boolean",
      "default": true
    },
    "trim_error_rate": {
      "title": "Cutadapt error rate",
      "type": "number",
      "default": 0.12,
      "minimum": 0.0,
      "maximum": 0.3
    },

    "min_q": {
      "title": "Minimum Q-score",
      "type": "integer",
      "default": 9,
      "minimum": 0,
      "maximum": 30
    },
    "min_len": {
      "title": "Minimum length",
      "type": "integer",
      "default": 300,
      "minimum": 1
    },
    "max_len": {
      "title": "Maximum length",
      "type": "integer",
      "default": 1200,
      "minimum": 1
    },

    "cluster_id": {
      "title": "Clustering identity (VSEARCH)",
      "type": "number",
      "default": 0.9,
      "minimum": 0.5,
      "maximum": 1.0
    },
    "min_cluster_reads": {
      "title": "Minimum reads per cluster",
      "type": "integer",
      "default": 20,
      "minimum": 1
    },

    "blast_topn": {
      "title": "BLAST max targets per query",
      "type": "integer",
      "default": 5,
      "minimum": 1,
      "maximum": 50
    }
  },
  "required": ["reads", "db_fasta"]
}
